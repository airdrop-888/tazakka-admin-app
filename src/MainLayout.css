/* frontend/src/MainLayout.css (FINAL FIX - Dropdown tidak ketutup & UX Sidebar) */

/* --- Layout container utama --- */
.layout-container { 
  display: flex; 
  min-height: 100vh; 
  overflow-x: clip;      /* Hindari bug overflow horizontal */
  overflow-y: visible;   /* IZINKAN dropdown keluar container */
}

/* --- Sidebar --- */
.sidebar { 
  width: 250px; 
  background-color: #1a222e; 
  color: white; 
  padding: 20px 10px; 
  display: flex; 
  flex-direction: column; 
  flex-shrink: 0; 
  transition: width 0.3s ease, transform 0.3s ease; 
  position: fixed; 
  top: 0; 
  left: 0; 
  height: 100vh; 
  z-index: 1000; 
  border-right: 1px solid #2d3748; 
}

.sidebar.collapsed { width: 88px; }

.sidebar-header { 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  margin-bottom: 25px; 
  padding: 0 15px; 
  height: 40px; 
}

.brand { 
  font-size: 22px; 
  font-weight: 600; 
  color: #e2e8f0; 
  white-space: nowrap; 
  overflow: hidden; 
  opacity: 1; 
  transition: opacity 0.2s 0.1s ease-in-out; 
}

.sidebar.collapsed .brand { opacity: 0; width: 0; }

.toggle-button { 
  background: none; 
  border: none; 
  color: #a0aec0; 
  cursor: pointer; 
  font-size: 24px; 
  padding: 5px; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  border-radius: 8px; 
  transition: background-color 0.2s, color 0.2s; 
}

.toggle-button:hover { background-color: #2d3748; color: #e2e8f0; }

.user-info { 
  padding: 15px; 
  margin: 0 10px 15px 10px; 
  border-radius: 8px; 
  background-color: rgba(255, 255, 255, 0.05); 
  white-space: nowrap; 
  opacity: 1; 
  transition: opacity 0.2s ease-in-out, background-color 0.2s ease-in-out; 
}

.sidebar.collapsed .user-info { opacity: 0; display: none; }

.user-name { 
  font-weight: 600; 
  font-size: 15px; 
  color: #e2e8f0; 
}

.user-role { 
  font-size: 13px; 
  color: #a0aec0; 
  text-transform: capitalize; 
}

/* --- Navigasi sidebar --- */
.sidebar-nav { 
  flex-grow: 1; 
  overflow-y: auto; 
  min-height: 0; 
}

.nav-link { 
  color: #a0aec0; 
  text-decoration: none; 
  padding: 12px 20px; 
  margin: 4px 10px; 
  border-radius: 8px; 
  display: flex; 
  align-items: center; 
  gap: 18px; 
  transition: all 0.2s ease; 
  font-size: 15px; 
  font-weight: 500; 
  white-space: nowrap; 
  position: relative; 
}

.nav-link:hover { background-color: #2d3748; color: white; }

.nav-link.active { 
  background-color: #3498db; 
  color: white; 
  font-weight: 600; 
}

.nav-link.active::before { 
  content: ''; 
  position: absolute; 
  left: 0; 
  top: 50%; 
  transform: translateY(-50%); 
  height: 60%; 
  width: 4px; 
  background-color: #ffffff; 
  border-radius: 0 4px 4px 0; 
}

.nav-link span { 
  opacity: 1; 
  transition: opacity 0.2s ease-in-out; 
}

.sidebar.collapsed .nav-link span { 
  opacity: 0; 
  display: none; 
}

/* Tombol Logout */
.logout-button { 
  flex-shrink: 0; 
  background: none; 
  border: none; 
  color: #a0aec0; 
  padding: 12px 20px; 
  text-align: left; 
  cursor: pointer; 
  margin: 8px 10px 0 10px; 
  display: flex; 
  align-items: center; 
  gap: 18px; 
  font-size: 15px; 
  font-weight: 500; 
  width: calc(100% - 20px); 
  border-radius: 8px; 
  transition: all 0.2s ease; 
  white-space: nowrap; 
}

.logout-button:hover { background-color: #c0392b; color: white; }

.sidebar.collapsed .logout-button span { display: none; }

/* --- Perbaikan UX untuk sidebar collapsed --- */
.sidebar.collapsed .nav-link,
.sidebar.collapsed .logout-button {
  justify-content: center;
  padding: 16px;
}

.sidebar.collapsed .nav-link svg,
.sidebar.collapsed .logout-button svg {
  font-size: 22px;
  margin-right: 0;
}

/* --- Konten utama (Main Content) --- */
.main-content { 
  flex-grow: 1; 
  padding: 30px 40px; 
  background-color: #f8fafc; 
  margin-left: 250px; 
  transition: margin-left 0.3s ease-in-out; 
  display: flex; 
  flex-direction: column; 
  min-width: 0; 
  position: relative; /* IZINKAN dropdown berada di atas elemen lain di dalam konten */
  z-index: 10; /* Pastikan ini lebih rendah dari z-index kartu yang aktif */
}

.sidebar.collapsed ~ .main-content { 
  margin-left: 88px; 
}

/* --- Mobile Responsiveness --- */
@media (max-width: 768px) {
  .sidebar { 
    transform: translateX(-100%); 
    width: 280px !important; 
  }
  .sidebar.mobile-open { 
    transform: translateX(0); 
    box-shadow: 10px 0 25px -10px rgba(0,0,0,0.2); 
  }
  .main-content { 
    margin-left: 0 !important; 
    padding: 20px 15px; 
  }
  .sidebar-overlay { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background-color: rgba(0, 0, 0, 0.5); 
    z-index: 999; 
    opacity: 0; 
    visibility: hidden; 
    transition: all 0.3s ease; 
  }
  .sidebar-overlay.active { 
    opacity: 1; 
    visibility: visible; 
  }
}

/* --- Floating Action Button untuk Mobile Sidebar --- */
.mobile-fab { 
  position: fixed; 
  bottom: 20px; 
  right: 20px; 
  z-index: 950; 
  width: 60px; 
  height: 60px; 
  border-radius: 50%; 
  background-color: #3498db; 
  color: white; 
  border: none; 
  box-shadow: 0 6px 12px rgba(0,0,0,0.2); 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1), background-color 0.3s ease; 
  cursor: pointer; 
  -webkit-tap-highlight-color: transparent; 
}

.mobile-fab.open { 
  transform: translateX(-280px); 
  background-color: #718096; 
  box-shadow: 0 4px 8px rgba(0,0,0,0.15); 
}

.mobile-fab svg { 
  position: absolute; 
  font-size: 28px; 
  transition: transform 0.3s ease, opacity 0.3s ease; 
}

.mobile-fab .fab-icon-menu { 
  transform: rotate(0deg) scale(1); 
  opacity: 1; 
}

.mobile-fab .fab-icon-close { 
  transform: rotate(-90deg) scale(0); 
  opacity: 0; 
}

.mobile-fab.open .fab-icon-menu { 
  transform: rotate(90deg) scale(0); 
  opacity: 0; 
}

.mobile-fab.open .fab-icon-close { 
  transform: rotate(0deg) scale(1); 
  opacity: 1; 
}